(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5nP1":function(t,e,i){"use strict";i.r(e),i.d(e,"ListModule",(function(){return q}));var s=i("ofXK"),n=i("PCNd"),a=i("tyNb"),r=i("0IaG"),c=i("fXoL"),o=i("bTqV");let b=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.message=e.message,this.title=e.title}ngOnInit(){}onDismiss(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(r.f),c.Kb(r.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-confirm-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","primary",3,"click"]],template:function(t,e){1&t&&(c.Pb(0,"h1",0),c.yc(1),c.Ob(),c.Pb(2,"div",1),c.Pb(3,"p"),c.yc(4),c.Ob(),c.Ob(),c.Pb(5,"div",2),c.Pb(6,"button",3),c.Wb("click",(function(){return e.onDismiss()})),c.yc(7,"No"),c.Ob(),c.Pb(8,"button",4),c.Wb("click",(function(){return e.onConfirm()})),c.yc(9,"Yes"),c.Ob(),c.Ob()),2&t&&(c.zb(1),c.Ac(" ",e.title,"\n"),c.zb(3),c.zc(e.message))},directives:[r.g,r.d,r.c,o.a],encapsulation:2}),t})();var l=i("3Pt+"),d=i("niax"),u=i("21no"),m=i("kmnG"),f=i("qFsG"),p=i("/1cH"),h=i("NFeN"),g=i("FKr1"),v=i("sYmb");function O(t,e){if(1&t&&(c.Pb(0,"mat-option",10),c.yc(1),c.Ob()),2&t){const t=e.$implicit;c.ec("value",t),c.zb(1),c.Bc(" ",t.username," - ",t.email," ")}}function P(t,e){1&t&&c.Lb(0,"span",11)}let y=(()=>{class t{constructor(t,e,i,s,n){this.formBuilder=t,this.accountService=e,this.listService=i,this.dialogRef=s,this.data=n,this.loading=!1,this.submitted=!1,this.usersFound=[],console.log("data",n),this.listId=n.listId}ngOnInit(){this.form=this.formBuilder.group({filter:[""],description:["",l.r.required]})}get f(){return this.form.controls}onSubmit(){console.log("submit",this.f.filter.value),this.f.filter.value._id&&this.listService.shareList(this.listId,this.f.filter.value).subscribe(t=>{console.log("response share user",t)})}onClose(){console.log("close"),this.dialogRef.close(!1)}getFilteredUsers(t){console.log(t),this.accountService.geFilteredUsers(t).subscribe(t=>{console.log("users",t),this.usersFound=t})}displayUser(t){return t&&t.username?t.username:""}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(l.c),c.Kb(d.a),c.Kb(u.a),c.Kb(r.f),c.Kb(r.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-share"]],decls:21,vars:15,consts:[[3,"formGroup","ngSubmit"],[1,"example-full-width"],["type","text","aria-label","Number","matInput","","formControlName","filter",3,"placeholder","matAutocomplete","input"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-button","",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["inline",""],["mat-button","","type","button",3,"click"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,e){if(1&t&&(c.Pb(0,"h2"),c.yc(1),c.Zb(2,"translate"),c.Ob(),c.Pb(3,"form",0),c.Wb("ngSubmit",(function(){return e.onSubmit()})),c.Pb(4,"mat-form-field",1),c.Pb(5,"input",2),c.Wb("input",(function(t){return e.getFilteredUsers(t.target.value)})),c.Zb(6,"translate"),c.Ob(),c.Pb(7,"mat-autocomplete",3,4),c.xc(9,O,2,3,"mat-option",5),c.Ob(),c.Ob(),c.Pb(10,"div"),c.Pb(11,"button",6),c.xc(12,P,1,0,"span",7),c.yc(13),c.Zb(14,"translate"),c.Pb(15,"mat-icon",8),c.yc(16,"person_add"),c.Ob(),c.Ob(),c.Pb(17,"button",9),c.Wb("click",(function(){return e.onClose()})),c.yc(18,"Cancel "),c.Pb(19,"mat-icon",8),c.yc(20,"cancel"),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t){const t=c.lc(8);c.zb(1),c.zc(c.ac(2,9,"lists.share.title")),c.zb(2),c.ec("formGroup",e.form),c.zb(2),c.fc("placeholder",c.ac(6,11,"lists.share.field.usernameOrEmail")),c.ec("matAutocomplete",t),c.zb(2),c.ec("displayWith",e.displayUser),c.zb(2),c.ec("ngForOf",e.usersFound),c.zb(2),c.ec("disabled",e.loading),c.zb(1),c.ec("ngIf",e.loading),c.zb(1),c.Ac(" ",c.ac(14,13,"lists.share.button.send")," ")}},directives:[l.t,l.l,l.f,m.c,f.a,l.b,p.c,l.k,l.e,p.a,s.k,o.a,s.l,h.a,g.h],pipes:[v.c],encapsulation:2}),t})();class _{constructor(t,e){t&&(this.name=t),e&&(this.description=e)}}function z(t,e){1&t&&(c.Pb(0,"h2"),c.yc(1),c.Zb(2,"translate"),c.Ob()),2&t&&(c.zb(1),c.zc(c.ac(2,1,"lists.add")))}function I(t,e){1&t&&(c.Pb(0,"h2"),c.yc(1),c.Zb(2,"translate"),c.Ob()),2&t&&(c.zb(1),c.zc(c.ac(2,1,"lists.edit")))}function L(t,e){1&t&&(c.Pb(0,"div"),c.yc(1,"Name is required"),c.Ob())}function S(t,e){if(1&t&&(c.Pb(0,"div",10),c.xc(1,L,2,0,"div",0),c.Ob()),2&t){const t=c.Yb();c.zb(1),c.ec("ngIf",t.f.name.errors.required)}}function k(t,e){1&t&&c.Lb(0,"div",10)}function w(t,e){1&t&&c.Lb(0,"span",11)}const x=function(t){return{"is-invalid":t}};let F=(()=>{class t{constructor(t,e,i,s){this.listService=t,this.formBuilder=e,this.dialogRef=i,this.data=s,this.loading=!1,this.submitted=!1,this.list=s.list||new _,this.isAddMode=s.isAddMode}ngOnInit(){this.form=this.formBuilder.group({name:["",l.r.required],description:["",l.r.required]}),this.list._id&&(this.f.name.setValue(this.list.name),this.f.description.setValue(this.list.description))}get f(){return this.form.controls}onSubmit(){this.list.name=this.f.name.value,this.list.description=this.f.description.value,this.listService.addList(this.list).subscribe(t=>{this.dialogRef.close(t)})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(u.a),c.Kb(l.c),c.Kb(r.f),c.Kb(r.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-list-edit"]],decls:24,vars:10,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],["for","name"],["matInput","","type","text","formControlName","name"],["class","invalid-feedback",4,"ngIf"],["for","description"],["matInput","","type","text","formControlName","description",3,"ngClass"],["type","submit","mat-button","",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["mat-button","","type","button",3,"click"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,e){1&t&&(c.xc(0,z,3,3,"h2",0),c.xc(1,I,3,3,"h2",0),c.Pb(2,"form",1),c.Wb("ngSubmit",(function(){return e.onSubmit()})),c.Pb(3,"div"),c.Pb(4,"mat-form-field"),c.Pb(5,"mat-label",2),c.yc(6,"Name"),c.Ob(),c.Lb(7,"input",3),c.xc(8,S,2,1,"div",4),c.Ob(),c.Pb(9,"mat-form-field"),c.Pb(10,"mat-label",5),c.yc(11,"Description"),c.Ob(),c.Lb(12,"input",6),c.xc(13,k,1,0,"div",4),c.Ob(),c.Ob(),c.Pb(14,"div"),c.Pb(15,"button",7),c.xc(16,w,1,0,"span",8),c.Pb(17,"mat-icon"),c.yc(18,"save"),c.Ob(),c.yc(19," Save "),c.Ob(),c.Pb(20,"button",9),c.Wb("click",(function(){return e.close()})),c.Pb(21,"mat-icon"),c.yc(22,"cancel"),c.Ob(),c.yc(23," Cancel"),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.ec("ngIf",e.isAddMode),c.zb(1),c.ec("ngIf",!e.isAddMode),c.zb(1),c.ec("formGroup",e.form),c.zb(6),c.ec("ngIf",e.submitted&&e.f.name.errors),c.zb(4),c.ec("ngClass",c.jc(8,x,e.submitted&&e.f.description.errors)),c.zb(1),c.ec("ngIf",e.submitted&&e.f.description.errors),c.zb(2),c.ec("disabled",e.loading),c.zb(1),c.ec("ngIf",e.loading))},directives:[s.l,l.t,l.l,l.f,m.c,m.f,f.a,l.b,l.k,l.e,s.j,o.a,h.a],pipes:[v.c],encapsulation:2}),t})();var U=i("AytR"),A=i("Wp6s"),C=i("STbY");function K(t,e){if(1&t&&c.Lb(0,"img",15),2&t){const t=c.Yb(2);c.gc("src","",t.apiUrl,"/images/default-user.jpg",c.pc)}}function W(t,e){if(1&t&&c.Lb(0,"img",15),2&t){const t=c.Yb().$implicit,e=c.Yb();c.hc("src","",e.apiUrl,"/images/",t.owner.avatar.filename,".",t.owner.avatar.fileExt,"",c.pc)}}function Y(t,e){if(1&t&&c.Lb(0,"img",18),2&t){const t=c.Yb(3);c.gc("src","",t.apiUrl,"/images/default-user.jpg",c.pc)}}function N(t,e){if(1&t&&c.Lb(0,"img",18),2&t){const t=c.Yb().$implicit,e=c.Yb(2);c.hc("src","",e.apiUrl,"/images/",t.avatar.filename,".",t.avatar.fileExt,"",c.pc)}}function M(t,e){if(1&t&&(c.Pb(0,"div",16),c.xc(1,Y,1,1,"img",17),c.xc(2,N,1,3,"img",17),c.Pb(3,"span"),c.yc(4),c.Ob(),c.Ob()),2&t){const t=e.$implicit;c.zb(1),c.ec("ngIf",!t.avatar),c.zb(1),c.ec("ngIf",t.avatar),c.zb(2),c.zc(t.username)}}const E=function(t){return[t]},R=function(){return{exact:!0}};function Z(t,e){if(1&t){const t=c.Qb();c.Pb(0,"mat-card",4),c.Pb(1,"div"),c.Pb(2,"div",5),c.Pb(3,"div",6),c.Pb(4,"a",7),c.Pb(5,"mat-card-title"),c.yc(6),c.Ob(),c.Pb(7,"mat-card-subtitle"),c.yc(8),c.Ob(),c.Ob(),c.Ob(),c.Pb(9,"div",8),c.Pb(10,"span"),c.yc(11),c.Ob(),c.Pb(12,"button",9),c.Pb(13,"mat-icon"),c.yc(14,"more_vert"),c.Ob(),c.Ob(),c.Pb(15,"mat-menu",null,10),c.Pb(17,"button",11),c.Wb("click",(function(){c.nc(t);const i=e.$implicit;return c.Yb().onEdit(i)})),c.Pb(18,"mat-icon"),c.yc(19,"edit"),c.Ob(),c.Pb(20,"span"),c.yc(21),c.Zb(22,"translate"),c.Ob(),c.Ob(),c.Pb(23,"button",11),c.Wb("click",(function(){c.nc(t);const i=e.$implicit;return c.Yb().onDelete(i._id)})),c.Pb(24,"mat-icon"),c.yc(25,"delete"),c.Ob(),c.Pb(26,"span"),c.yc(27),c.Zb(28,"translate"),c.Ob(),c.Ob(),c.Pb(29,"button",11),c.Wb("click",(function(){c.nc(t);const i=e.$implicit;return c.Yb().onShare(i._id)})),c.Pb(30,"mat-icon"),c.yc(31,"person_add"),c.Ob(),c.Pb(32,"span"),c.yc(33),c.Zb(34,"translate"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(35,"mat-card-content"),c.Pb(36,"div",12),c.xc(37,K,1,1,"img",13),c.xc(38,W,1,3,"img",13),c.Pb(39,"span"),c.yc(40),c.Ob(),c.Ob(),c.xc(41,M,5,3,"div",14),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit,i=c.lc(16);c.zb(4),c.ec("routerLink",c.jc(20,E,"/list/"+t._id))("routerLinkActiveOptions",c.ic(22,R)),c.zb(2),c.zc(t.name),c.zb(2),c.zc(t.description),c.zb(3),c.Bc(" ",t.cartItems?t.cartItems.length:0,"/",(t.listItems?t.listItems.length:0)+(t.cartItems?t.cartItems.length:0)," "),c.zb(1),c.ec("matMenuTriggerFor",i),c.zb(9),c.zc(c.ac(22,14,"global.actions.edit")),c.zb(6),c.zc(c.ac(28,16,"global.actions.delete")),c.zb(6),c.zc(c.ac(34,18,"global.actions.share")),c.zb(4),c.ec("ngIf",!t.owner.avatar),c.zb(1),c.ec("ngIf",t.owner.avatar),c.zb(2),c.zc(t.owner.username),c.zb(1),c.ec("ngForOf",t.sharedUsers)}}const j=[{path:"",component:(()=>{class t{constructor(t,e,i){this.dialog=t,this.listService=e,this.accountService=i,this.userLists=this.listService.userListsSubject,this.user=this.accountService.sessionValue.user,this.apiUrl=U.a.apiUrl,console.log("this.apiUrl",this.apiUrl)}ngOnInit(){this.listService.getUserList()}onEdit(t){this.dialog.open(F,{data:{list:t,isAddMode:!1}}).afterClosed().subscribe(t=>{this.listService.getUserList()})}onDelete(t){this.dialog.open(b,{data:{message:"Deseas borrar la lista",title:"Borrar lista"}}).afterClosed().subscribe(e=>{e?this.listService.deleteList(t).subscribe(t=>{this.listService.getUserList()}):console.log("closed without confirm")})}addList(){this.dialog.open(F,{data:{isAddMode:!0}}).afterClosed().subscribe(t=>{console.info("The list edit dialog was closed",t),this.listService.getUserList()})}onShare(t){this.dialog.open(y,{data:{listId:t}}).afterClosed().subscribe(t=>{console.info("The share dialog was closed",t),this.listService.getUserList()})}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(r.b),c.Kb(u.a),c.Kb(d.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-list-home"]],decls:7,vars:3,consts:[[1,"list-home"],["class","list-home__card",4,"ngFor","ngForOf"],[1,"list-home__add-button"],["mat-fab","","color","primary","aria-label","Add list",1,"mat-elevation-z6",3,"click"],[1,"list-home__card"],[1,"list-home__card-header"],[1,"list-home__card-header--title"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"toolbar__right"],["mat-icon-button","",1,"toolbar__sidenav-button",3,"matMenuTriggerFor"],["actions","matMenu"],["mat-menu-item","",3,"click"],[1,"list-home__avatar","list-home__avatar--owner"],["class","list-home__avatar-img list-home__avatar-img--owner",3,"src",4,"ngIf"],["class","list-home__avatar list-home__avatar--shared-user",4,"ngFor","ngForOf"],[1,"list-home__avatar-img","list-home__avatar-img--owner",3,"src"],[1,"list-home__avatar","list-home__avatar--shared-user"],["class","list-home__avatar-img list-home__avatar-img--shared-user",3,"src",4,"ngIf"],[1,"list-home__avatar-img","list-home__avatar-img--shared-user",3,"src"]],template:function(t,e){1&t&&(c.Pb(0,"div",0),c.xc(1,Z,42,23,"mat-card",1),c.Zb(2,"async"),c.Ob(),c.Pb(3,"div",2),c.Pb(4,"button",3),c.Wb("click",(function(){return e.addList()})),c.Pb(5,"mat-icon"),c.yc(6,"add"),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.zb(1),c.ec("ngForOf",c.ac(2,1,e.userLists)))},directives:[s.k,o.a,h.a,A.a,a.e,a.d,A.e,A.d,C.c,C.d,C.a,A.b,s.l],pipes:[s.b,v.c],encapsulation:2}),t})()}];let $=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(j)],a.f]}),t})(),q=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[s.c,n.a,$]]}),t})()}}]);